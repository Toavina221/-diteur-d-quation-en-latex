<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>√âditeur d'√âquations LaTeX</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js"></script>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#1e1e1e; color:#dcdcdc; padding:20px; min-height:100vh;}
.container { max-width:1200px; margin:0 auto;}
h1 { text-align:center; margin-bottom:30px; font-size:2.5rem; color:#bfa75f; }
.editor-container { display:grid; grid-template-columns:1fr 1fr; gap:20px; }
.panel { background:#2b2b2b; border-radius:12px; border:2px solid #444; box-shadow:0 8px 32px rgba(0,0,0,0.3); overflow:hidden; transition:all 0.3s ease;}
.panel-header { background: #383838; padding:15px 20px; color:#bfa75f; font-weight:600; font-size:1.1rem; display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #444;}
.panel-content { padding:0; }
#input, #latexOutput { 
    width:100%; 
    min-height:400px; /* hauteur initiale fixe */
    background:#1e1e1e; 
    color:#bfa75f; 
    border:none; 
    padding:20px; 
    font-family:'Courier New', monospace; 
    font-size:18px; 
    line-height:1.6; 
    resize:none; 
    outline:none;
    overflow:auto;
    white-space: pre-wrap;
}
#input:focus { background:#252525; }
.copy-btn { background: #444; color:white; border:none; padding:8px 16px; border-radius:6px; cursor:pointer; font-size:14px; font-weight:500; transition:all 0.3s ease;}
.copy-btn:hover { background:#666; transform:translateY(-2px);}
.copy-feedback { position: fixed; top:20px; right:20px; background:#4caf50; color:white; padding:12px 24px; border-radius:6px; opacity:0; transform:translateY(-20px); transition: all 0.3s ease; z-index:1000; font-weight:500;}
.copy-feedback.show { opacity:1; transform:translateY(0);}
.latex-command { color:#ffb86c; }
.latex-bracket { color:#8be9fd; }
.latex-brace { color:#50fa7b; }
.latex-text { color:#bfa75f; }
.latex-symbol { color:#ff79c6; }
@media (max-width:1200px){
    .editor-container { grid-template-columns:1fr; grid-template-rows:auto auto; gap:15px;}
    .panel { min-height:300px;}
    h1 { font-size:2rem;}
}
</style>
</head>
<body>
<div class="container">
<h1>üßÆ √âditeur d'√âquations LaTeX</h1>
<div class="editor-container">

<!-- Panel de saisie -->
<div class="panel input-panel">
<div class="panel-header">‚úèÔ∏è Code d'entr√©e <button class="copy-btn" onclick="copyInput()">Copier</button></div>
<div class="panel-content"><textarea id="input" placeholder="Tapez vos √©quations ici..."></textarea></div>
</div>

<!-- Panel LaTeX -->
<div class="panel latex-panel">
<div class="panel-header">üìù Code LaTeX <button class="copy-btn" onclick="copyLatex()">Copier</button></div>
<div class="panel-content"><div id="latexOutput"></div></div>
</div>

</div>
</div>

<div class="copy-feedback" id="copyFeedback">Copi√© dans le presse-papiers!</div>

<script>
window.MathJax = { tex:{ inlineMath:[['$','$']], processEscapes:true, processEnvironments:true }, startup:{ ready: function(){MathJax.startup.defaultReady();}}};

let latexCode = '$\\begin{aligned}\n\n\\end{aligned}$';

function processInput(input){
    let lines=input.split('\n');
    let processedLines=[];
    for(let line of lines){
        if(line.trim()===''){ processedLines.push(''); continue; }
        let processed=line;

        // Transformations math√©matiques
        processed = processed.replace(/(\d+|\w+|\([^)]+\)|\{[^}]+\})\s*\/\s*(\d+|\w+|\([^)]+\)|\{[^}]+\})/g,'\\cfrac{$1}{$2}');
        processed = processed.replace(/\*/g,' \\times ');
        processed = processed.replace(/!=/g,' \\neq ');
        processed = processed.replace(/<=/g,' \\leqslant ');
        processed = processed.replace(/>=/g,' \\geqslant ');
        processed = processed.replace(/::/g,' \\div ');
        processed = processed.replace(/%/g,'\\%');
        processed = processed.replace(/\\bm/g,'\\begin{matrix}');

        // Regrouper mots alphab√©tiques cons√©cutifs
        processed = processed.replace(/\b([a-zA-Z]{2,}(?:\s+[a-zA-Z]{2,})*)\b/g,function(match){
            const latexCommands = ['cfrac','times','neq','leqslant','geqslant','div','matrix','begin','end','text','sqrt','sum','int','lim','sin','cos','tan','log','ln','exp'];
            if(latexCommands.includes(match)) return match;
            return ' \\text{ '+match+' } ';
        });

        if(processed.trim()!=='') processed='& '+processed+' \\\\';
        processedLines.push(processed);
    }

    for(let i=processedLines.length-1;i>=0;i--){
        if(processedLines[i].trim()!==''){
            processedLines[i]=processedLines[i].replace(/ \\\\$/,'');
            break;
        }
    }

    return processedLines.join('\n');
}

function highlightLatex(code){
    return code.replace(/(\\[a-zA-Z]+)/g,'<span class="latex-command">$1</span>')
               .replace(/(\[|\])/g,'<span class="latex-bracket">$1</span>')
               .replace(/(\{|\})/g,'<span class="latex-brace">$1</span>')
               .replace(/(\\text\{[^}]*\})/g,'<span class="latex-text">$1</span>')
               .replace(/(\\times|\\neq|\\leqslant|\\geqslant|\\div|&|\\\\)/g,'<span class="latex-symbol">$1</span>');
}

function updateOutput(){
    const input = document.getElementById('input').value;
    let processed = processInput(input);
    if(processed.trim()===''){
        latexCode = '$\\begin{aligned}\n\n\\end{aligned}$';
    } else {
        latexCode = '$\\begin{aligned}\n'+processed+'\n\\end{aligned}$';
    }
    document.getElementById('latexOutput').innerHTML = highlightLatex(latexCode);
}

function copyToClipboard(text){
    navigator.clipboard.writeText(text).then(showCopyFeedback).catch(err=>console.error(err));
}
function copyInput(){copyToClipboard(document.getElementById('input').value);}
function copyLatex(){copyToClipboard(latexCode);}
function showCopyFeedback(){const f=document.getElementById('copyFeedback'); f.classList.add('show'); setTimeout(()=>f.classList.remove('show'),2000);}

document.getElementById('input').addEventListener('input',updateOutput);

document.addEventListener('DOMContentLoaded',function(){
    document.getElementById('input').value=''; // vide par d√©faut
    updateOutput(); // LaTeX sur plusieurs lignes d√®s le d√©part
});
</script>
</body>
</html>
